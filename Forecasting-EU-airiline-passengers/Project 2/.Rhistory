getwd()
data <- read.csv("data/estat_avia_paoc_filtered.csv") %>%
select(freq, tra_meas, tra_cov, geo, TIME_PERIOD, OBS_VALUE)
library(broom)
library(tidyverse)
library(dplyr)
### Aggregation ###
library(fpp3)
library(patchwork)
library(ggplot2)
library(stats)
library(tibbletime)
data <- read.csv("data/estat_avia_paoc_filtered.csv") %>%
select(freq, tra_meas, tra_cov, geo, TIME_PERIOD, OBS_VALUE)
getwd()
setwd("/Users/jacki/Desktop/UNIL/Second_semester/Forecasting 1 and II/Forecasting 2 /Project2/FC2-All-star-Team/Project2/Project 2"
)
data <- read.csv("data/estat_avia_paoc_filtered.csv") %>%
select(freq, tra_meas, tra_cov, geo, TIME_PERIOD, OBS_VALUE)
View(data)
## first we only take monthly boarded total passengers data
#and transform obsrvd in mln , we also remove the total from tra_cov and the
# EU sums from geo
Pass.m <- data %>%
filter(freq == "M", tra_meas == "PAS_BRD", tra_cov != "TOTAL",
geo != "EU27_2007",geo != "EU28", geo !="EU27_2020")%>%
mutate(TIME_PERIOD = yearmonth(TIME_PERIOD), OBS_VALUE = OBS_VALUE/1e06)%>%
tsibble(index = TIME_PERIOD, key = c( tra_cov, geo)) %>%
select(TIME_PERIOD, tra_cov, geo , OBS_VALUE)
?yearmonth
data$TIME_PERIOD <- as.character(data$TIME_PERIOD)
## first we only take monthly boarded total passengers data
#and transform obsrvd in mln , we also remove the total from tra_cov and the
# EU sums from geo
Pass.m <- data %>%
filter(freq == "M", tra_meas == "PAS_BRD", tra_cov != "TOTAL",
geo != "EU27_2007",geo != "EU28", geo !="EU27_2020")%>%
mutate(TIME_PERIOD = yearmonth(TIME_PERIOD), OBS_VALUE = OBS_VALUE/1e06)%>%
tsibble(index = TIME_PERIOD, key = c( tra_cov, geo)) %>%
select(TIME_PERIOD, tra_cov, geo , OBS_VALUE)
## first we only take monthly boarded total passengers data
#and transform obsrvd in mln , we also remove the total from tra_cov and the
# EU sums from geo
Pass.m <- data %>%
filter(freq == "M", tra_meas == "PAS_BRD", tra_cov != "TOTAL",
geo != "EU27_2007",geo != "EU28", geo !="EU27_2020")%>%
mutate(TIME_PERIOD = yearmonth(TIME_PERIOD), OBS_VALUE = OBS_VALUE/1e06)%>%
tsibble(index = TIME_PERIOD, key = c(tra_cov, geo)) %>%
select(TIME_PERIOD, tra_cov, geo , OBS_VALUE)
## first we only take monthly boarded total passengers data
#and transform obsrvd in mln , we also remove the total from tra_cov and the
# EU sums from geo
Pass.m <- data %>%
filter(freq == "M", tra_meas == "PAS_BRD", tra_cov != "TOTAL",
geo != "EU27_2007",geo != "EU28", geo !="EU27_2020")%>%
mutate(TIME_PERIOD = yearmonth(TIME_PERIOD), OBS_VALUE = OBS_VALUE/1e06)
## first we only take monthly boarded total passengers data
#and transform obsrvd in mln , we also remove the total from tra_cov and the
# EU sums from geo
Pass.m <- data %>%
filter(freq == "M", tra_meas == "PAS_BRD", tra_cov != "TOTAL",
geo != "EU27_2007",geo != "EU28", geo !="EU27_2020")%>%
mutate(TIME_PERIOD = yearmonth(TIME_PERIOD), OBS_VALUE = OBS_VALUE/1e06)%>%
tsibble(index = TIME_PERIOD, key = c(tra_cov, geo)) %>%
select(TIME_PERIOD, tra_cov, geo , OBS_VALUE)
duplicates(data)
duplicates(data, index =TIME_PERIOD )
d<- data%>%
mutate(Date = yearmonth(TIME_PERIOD)) %>% {table(.$TIME_PERIOD,.$tra_cov,.$geo)}
print(d)
